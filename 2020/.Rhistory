#Reset functions
rm(list=ls())
dev.off()
#Libraries
library(dplyr)
library(tidyr)
library(stringr)
library(rlang)
library(Rfast)
#Open Data
setwd("C:/Users/jcronan/Documents/GitHub/WageBilling/2020")
raw.data <- read.table("Time report 2020-01-01 - 2020-12-31.csv", header = F, fill = T, skip = 1, sep = ",", quote = "\"")
codes <- read.table("projectCodes_2020.csv", header = F, fill = T, skip = 1, sep = ",")
#Review Data
str(raw.data)
head(raw.data)
#Create new data frame with the following fields:
#1) Last name
#2) Project Code
#3) Date
#4) Duration
#Generate a vector that converts factor levels of dates into date values
date <- as.Date(raw.data$V4, format = "%m/%d/%Y")
#Generate a vector that converts dates into work weeks
week <- as.numeric(strftime(date, format = "%V"))
#Convert column with names and job codes into a character string
col2.1 <- as.character(raw.data$V2)
#Create a vector that lists possible last names.
last.names <- c("Cronan", "Eagle", "Lascheck", "Tripodi", "Thoreson", "Nemens", "Darmody", "Hallet")
#Create a vector store last names.
lastName.List <- character(length = length(col2.1))
str(lastName.List)
for(v in 1:length(col2.1))
{
if(is_empty(unlist(str_extract_all(col2.1[v], last.names[1]))) == T)
{lastName.List[v] <- lastName.List[v]} else
{lastName.List[v] <- unlist(str_extract_all(col2.1[v], last.names[1]))}
}
str(lastName.List)
i <- 2
for(v in 1:length(col2.1))
{
if(is_empty(unlist(str_extract_all(col2.1[v], last.names[i]))) == T)
{lastName.List[v] <- lastName.List[v]} else
{lastName.List[v] <- unlist(str_extract_all(col2.1[v], last.names[i]))}
}
str(lastName.List)
i <- 3
for(v in 1:length(col2.1))
{
if(is_empty(unlist(str_extract_all(col2.1[v], last.names[i]))) == T)
{lastName.List[v] <- lastName.List[v]} else
{lastName.List[v] <- unlist(str_extract_all(col2.1[v], last.names[i]))}
}
str(lastName.List)
i <- 4
for(v in 1:length(col2.1))
{
if(is_empty(unlist(str_extract_all(col2.1[v], last.names[i]))) == T)
{lastName.List[v] <- lastName.List[v]} else
{lastName.List[v] <- unlist(str_extract_all(col2.1[v], last.names[i]))}
}
str(lastName.List)
i <- 5
for(v in 1:length(col2.1))
{
if(is_empty(unlist(str_extract_all(col2.1[v], last.names[i]))) == T)
{lastName.List[v] <- lastName.List[v]} else
{lastName.List[v] <- unlist(str_extract_all(col2.1[v], last.names[i]))}
}
str(lastName.List)
i <- 6
for(v in 1:length(col2.1))
{
if(is_empty(unlist(str_extract_all(col2.1[v], last.names[i]))) == T)
{lastName.List[v] <- lastName.List[v]} else
{lastName.List[v] <- unlist(str_extract_all(col2.1[v], last.names[i]))}
}
str(lastName.List)
i <- 7
for(v in 1:length(col2.1))
{
if(is_empty(unlist(str_extract_all(col2.1[v], last.names[i]))) == T)
{lastName.List[v] <- lastName.List[v]} else
{lastName.List[v] <- unlist(str_extract_all(col2.1[v], last.names[i]))}
}
str(lastName.List)
i <- 8
for(v in 1:length(col2.1))
{
if(is_empty(unlist(str_extract_all(col2.1[v], last.names[i]))) == T)
{lastName.List[v] <- lastName.List[v]} else
{lastName.List[v] <- unlist(str_extract_all(col2.1[v], last.names[i]))}
}
str(lastName.List)
rm(list=ls())
dev.off()
